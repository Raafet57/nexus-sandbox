# Nexus Global Payments Sandbox - Environment Configuration
# Copy this file to .env and customize for your environment
# Reference: https://docs.nexusglobalpayments.org/

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL database configuration
POSTGRES_DB=nexus
POSTGRES_USER=nexus
POSTGRES_PASSWORD=nexus_sandbox_password_change_in_production

# Database connection strings
DATABASE_URL=postgresql://nexus:nexus_sandbox_password_change_in_production@postgres:5432/nexus
REDIS_URL=redis://redis:6379/0

# =============================================================================
# KAFKA CONFIGURATION (Optional - for event streaming)
# =============================================================================

# Kafka bootstrap servers (comma-separated)
KAFKA_BOOTSTRAP_SERVERS=kafka:29092

# Enable/disable Kafka (set to "false" in lite mode)
# Note: This is prepared for future use; Kafka is not currently used in the codebase
KAFKA_ENABLED=true

# =============================================================================
# OPENTELEMETRY/TRACING CONFIGURATION (Optional)
# =============================================================================

# Enable/disable OpenTelemetry tracing
OTEL_ENABLED=true

# OTLP endpoint for Jaeger/Tempo
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317

# Service name for tracing
OTEL_SERVICE_NAME=nexus-gateway

# Logging level (debug, info, warning, error, critical)
LOG_LEVEL=info

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT secret for authentication (CHANGE IN PRODUCTION!)
# IMPORTANT: Generate a strong random secret for production deployments
JWT_SECRET=nexus-sandbox-jwt-secret-change-in-production

# JWT algorithm
JWT_ALGORITHM=HS256

# JWT expiration time in minutes
JWT_EXPIRE_MINUTES=60

# HMAC shared secret for callback signatures
SHARED_SECRET=nexus-sandbox-shared-secret-change-in-production

# =============================================================================
# QUOTE CONFIGURATION
# Reference: https://docs.nexusglobalpayments.org/fx-provision/quotes
# =============================================================================

# Quote validity period in seconds (Nexus mandate: 600 seconds = 10 minutes)
QUOTE_VALIDITY_SECONDS=600

# =============================================================================
# PAYMENT CONFIGURATION
# Reference: https://docs.nexusglobalpayments.org/payment-setup/
# =============================================================================

# Payment timeout in seconds
PAYMENT_TIMEOUT_SECONDS=60

# Rate refresh interval in seconds
RATE_REFRESH_INTERVAL_SECONDS=60

# Rate refresh interval in milliseconds (for simulators)
RATE_REFRESH_INTERVAL_MS=60000

# Maximum retries for failed operations
MAX_RETRIES=3

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed CORS origins (comma-separated)
# Add your frontend URLs here for local development
CORS_ORIGINS=http://localhost:8080,http://localhost:3000,http://localhost:5173,http://127.0.0.1:8080,http://127.0.0.1:3000,http://127.0.0.1:5173

# =============================================================================
# NEXUS GATEWAY CONFIGURATION
# =============================================================================

# Nexus Gateway URL (for simulators to callback)
NEXUS_GATEWAY_URL=http://nexus-gateway:8000

# =============================================================================
# SIMULATOR CONFIGURATION
# =============================================================================

# PSP Simulator Defaults
PSP_BIC=DBSSSGSG
PSP_COUNTRY=SG
PSP_CURRENCY=SGD
PSP_NAME="DBS Bank Singapore"
PSP_MAX_AMOUNT=200000
PSP_FEE_PERCENT=0.5

# IPS Simulator Defaults
IPS_NAME=FAST
IPS_COUNTRY=SG
IPS_CURRENCY=SGD
IPS_CLEARING_SYSTEM_ID=SGFASG22
IPS_MAX_AMOUNT=200000

# FXP Simulator Defaults
FXP_ID=fxp-abc
FXP_NAME="ABC Currency Exchange"
FXP_BASE_SPREAD_BPS=50

# SAP Simulator Defaults
SAP_ID=sap-dbs
SAP_NAME="DBS SAP Singapore"
SAP_BIC=DBSSSGSG
SAP_COUNTRY=SG
SAP_CURRENCY=SGD

# PDO Simulator Defaults
PDO_ID=pdo-sg
PDO_NAME="PayNow Directory Singapore"
PDO_COUNTRY=SG
PROXY_TYPES=["MOBI","NRIC","UEN"]

# =============================================================================
# SANCTIONS SCREENING (Demo Only)
# =============================================================================

# Comma-separated list of names that will trigger sanctions rejection
# This is for demo/testing purposes only
SANCTIONS_REJECT_NAMES=Kim Jong Un,Vladimir Putin,Osama bin Laden

# =============================================================================
# DEMO/MOCK CONFIGURATION
# =============================================================================

# Enable mock data mode (frontend only - bypasses backend API)
MOCK_ENABLED=false

# Demo debtor information (used when XML parsing fails)
DEMO_DEBTOR_NAME="Demo Sender"
DEMO_DEBTOR_ACCOUNT="SG1234567890"
DEMO_CREDITOR_NAME="Demo Recipient"
DEMO_CREDITOR_ACCOUNT="TH9876543210"

# =============================================================================
# SANDBOX-SPECIFIC SETTINGS
# =============================================================================

# Enable lenient validation (logs warnings instead of rejecting)
SANDBOX_LENIENT=true

# Enable demo data endpoints
DEMO_DATA_ENABLED=true

# =============================================================================
# API RATE LIMITING (Optional)
# =============================================================================

# Rate limit per minute per client (0 = disabled)
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Enable debug mode (verbose logging, debug endpoints)
DEBUG=false

# Enable API documentation
DOCS_ENABLED=true

# =============================================================================
# PORT CONFIGURATION (for local development without Docker)
# =============================================================================

# Gateway port
NEXUS_GATEWAY_PORT=8000

# Dashboard port
DEMO_DASHBOARD_PORT=8080

# PostgreSQL port
POSTGRES_PORT=5432

# Redis port
REDIS_PORT=6379

# =============================================================================
# DOCKER COMPOSE OVERRIDES
# =============================================================================

# Use these to override docker-compose settings
# COMPOSE_PROJECT_NAME=nexus
# COMPOSE_FILE=docker-compose.yml
